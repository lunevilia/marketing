{% extends 'formlayout/formlayer.html' %}
{% block name %}

{% if user.is_authenticated %}
<script>
// ì´ë¯¸ì§€ ì‚­ì œí•˜ê¸° ê¸°ëŠ¥, ì´ë¯¸ì§€ ëª‡ê°œ ìˆëŠ”ì§€ í™•ì¸
var count_imagefile=0;
var count_file=0;

// ê°ê°ì˜ input type fileì— íŒŒì¼ì„ ì£¼ê¸° ìœ„í•´ì„œ ì„¤ì • (File -> Filelistë¡œ ë§Œë“¤ê¸°)
function FileListItem(a) {
  a = [].slice.call(Array.isArray(a) ? a : arguments)
  for (var c, b = c = a.length, d = !0; b-- && d;) d = a[b] instanceof File
  if (!d) throw new TypeError("expected argument to FileList is File or array of File objects")
  for (b = (new ClipboardEvent("")).clipboardData || new DataTransfer; c--;) b.items.add(a[c])
  return b.files
}

function deletePreview(ele, i) {
  try {
      //ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°ê°€ ì‚­ì œ
      $(ele).parent().remove();
      
      //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ (onclickìœ¼ë¡œ image_addë¥¼ í´ë¦­í•˜ëŠ” ê²ƒê³¼ ë™ì¼)
      //"ì„ íƒëœ íŒŒì¼" ë¬´ìŠ¨ íŒŒì¼ì¸ì§€ ì•Œë ¤ì£¼ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì•ˆë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©
      var filesMore = document.getElementById("image_fake");

      //1ê°œì”© ì§€ìš°ë©´ inputì— ìˆëŠ” ì •ë³´ë¥¼ ê°ê° ì‚­ì œ
      document.getElementById("image"+i).value = ""

      //1ê°œì”© ì‚­ì œë˜ë¯€ë¡œ ì´ë¯¸ì§€ ê°œìˆ˜ -1ê°œ
      count_imagefile = count_imagefile - 1

      //ê°œìˆ˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ê³³ì— ë³€ê²½ëœ ê°œìˆ˜ ì ìš© ì‹œí‚¤ê¸°
      files_count = document.getElementById("files_count");
      if (count_imagefile == 0){
          files_count.innerHTML = " ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
          filesMore.style.display = "none"
      } else {
          files_count.innerHTML = " íŒŒì¼ " + count_imagefile + "ê°œ ";
      }

      
  } catch (e) {
      console.log(e.message);
  }
}

// ##### íŒŒì¼ ì§€ìš°ê¸° #####
// ì§€ìš°ê¸° ëˆŒë €ì„ ê²½ìš°, ì§€ì›Œì§€ë¯€ë¡œ ë¹ ì§€ëŠ” ìˆ«ìì˜ ê°œìˆ˜ ì¸¡ì •
function deleteFPreview(ele, i) {
    try {
        //ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°ê°€ ì‚­ì œ
        $(ele).parent().remove();
        //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ (onclickìœ¼ë¡œ image_addë¥¼ í´ë¦­í•˜ëŠ” ê²ƒê³¼ ë™ì¼)
        //"ì„ íƒëœ íŒŒì¼" ë¬´ìŠ¨ íŒŒì¼ì¸ì§€ ì•Œë ¤ì£¼ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì•ˆë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©
        var filesMore2 = document.getElementById("file_fake");

        //1ê°œì”© ì§€ìš°ë©´ inputì— ìˆëŠ” ì •ë³´ë¥¼ ê°ê° ì‚­ì œ
        document.getElementById("file"+i).value = ""

        //1ê°œì”© ì‚­ì œë˜ë¯€ë¡œ ì´ë¯¸ì§€ ê°œìˆ˜ -1ê°œ
        count_file = count_file - 1

        //ê°œìˆ˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ê³³ì— ë³€ê²½ëœ ê°œìˆ˜ ì ìš© ì‹œí‚¤ê¸°
        files_count2 = document.getElementById("files_count_file");
        if (count_file == 0){
            files_count2.innerHTML = " ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
            filesMore2.style.display = "none"
        } else {
            files_count2.innerHTML = " íŒŒì¼ " + count_file + "ê°œ ";
        }

    } catch (e) {
        console.log(e.message);
    }
}


// ìˆ˜ì •í•˜ëŠ” í˜ì´ì§€
window.onload = function(){
    //Check File API support
    if(window.File && window.FileList && window.FileReader)
    {
        //í•œë²ˆë” ì—¬ëŸ¬ê°œì˜ íŒŒì¼ì„ ê°€ì ¸ì˜¬ ê²½ìš° ëª¨ë“  íŒŒì¼ ì •ë³´ë¥¼ ì§€ìš°ê¸° ìœ„í•´ì„œ ì„¤ì •í•œ ë³€ìˆ˜
        var save_before = false;
        var save_howmany;

        var filesInput = document.getElementById("id_image");

        //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ (onclickìœ¼ë¡œ image_addë¥¼ í´ë¦­í•˜ëŠ” ê²ƒê³¼ ë™ì¼)
        //"ì„ íƒëœ íŒŒì¼" ë¬´ìŠ¨ íŒŒì¼ì¸ì§€ ì•Œë ¤ì£¼ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì•ˆë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©
        var filesMore = document.getElementById("image_fake");

        //1ê°œì”© ì¶”ê°€í•˜ëŠ” ì§„ì§œ ë²„íŠ¼ ìœ„ì¹˜
        var filesfake = document.getElementById("image_add");
        
        // ############## ëª¨ë“  ì´ë¯¸ì§€ ì˜¬ë ¤ì„œ ì´ë¯¸ì§€ ë³´ì´ê²Œ í•˜ê¸° ##############
        filesInput.addEventListener("change", function(event){
            var files = event.target.files; //FileList object

            //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ ë³´ì´ê¸°
            filesMore.style.display = "block"
            
            //ëˆˆì†ì„ìš© ê¸€ì”¨ ë³´ì´ê²Œ ë§Œë“¤ê¸°!
            files_count = document.getElementById("files_count");
            if (files.length == 0){
                files_count.innerHTML = " ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
                filesMore.style.display = "none"
            } else {
                files_count.innerHTML = " íŒŒì¼ " + files.length + "ê°œ ";
            }
            
            //ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ ì¥ì†Œ ì„¤ì •
            var output = document.getElementById("result_picture");
            //íŒŒì¼ ì…ë ¥ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë„£ìœ¼ë©´ ê¸°ì¡´ì— ìˆë˜ ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ë¥¼ ì—†ì• ê¸°! (ì´ˆê¸°í™”)
            output.innerHTML = ""

            // save_beforeëŠ” í•œë²ˆ ì´ìƒ ì´ë¯¸ì§€ë¥¼ ë„£ì—ˆìœ¼ë©´! ë‹¤ì‹œ íŒŒì¼ ì…ë ¥ì„ í•  ë•Œ, ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ ìˆëŠ” inputì˜ ì •ë³´ë¥¼ ì‚­ì œí•œë‹¤!
            if (save_before){
                for(var i = 0; i < save_howmany; i++){
                    document.getElementById("image"+i).remove();
                }

                //ì‚­ì œê°€ ë˜ë©´ (ì´ˆê¸°í™” ê°’)
                save_before = false

                //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ ì•ˆë³´ì´ê¸°
                filesMore.style.display = "none"
            }

            //ì—¬ëŸ¬ê°œ ì´ë¯¸ì§€ì˜ ê°œìˆ˜ë¥¼ ì•Œê¸° ìœ„í•´ì„œ
            count_imagefile = files.length

            // ë‹¤ì¤‘ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” input type fileì„ ê°ê° ì‚­ì œ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œ í•˜ë‚˜ì”© ìƒì„± í›„, ì–´ë–¤ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•˜ë‚˜ì”© ì‚­ì œ
            for (var i = 0; i < files.length; i++){

                var _file = new FileListItem(files[i])

                var one_input = document.getElementById("one_input");
                var _input = document.createElement("input");
                _input.type = "file"

                // ë‹¤ì¤‘ìœ¼ë¡œ ë°›ì€ inputì„ ê°ì ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì§€ìš°ê±°ë‚˜ ë‚˜ì¤‘ì— ê´€ë¦¬ í•  ìˆ˜ ìˆë„ë¡ idë¥¼ ë‹¤ë¥´ê²Œ ì¤˜ì„œ ì •ì˜í–ˆë‹¤
                _input.id = "image"+i
                // FileListë¥¼ ë°›ê¸° ìœ„í•´ì„œ trueë¡œ ì„¤ì •
                _input.multiple = true
                _input.accept = "image/*"
                // nameì„ postimageë¡œ í•œ ì´ìœ ëŠ” Viewsì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì€ postimageë§Œ ì €ì¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´!
                _input.name = "postimage"
                _input.files = _file
                one_input.insertBefore(_input,null);

                save_before = true
                save_howmany = files.length
            }

            for(var i = 0; i< files.length; i++)
            {
                var file = files[i];
                //Only pics
                if(!file.type.match("image"))
                    continue;
                var picReader = new FileReader();

                getid(i) //functionì„ ë§Œë“¤ì–´ì„œ ì•ˆì— ë„£ìœ¼ë©´ ië¼ëŠ” ê°’ì„ onloadì•ˆì— ë„£ì„ ìˆ˜ ìˆìŒ!!

                function getid(id){ 
                    picReader.onload = function(event){
                        var picFile = event.target;
                        var div = document.createElement("div");
                        div.style.textAlign = "center"
                        div.innerHTML = "<img style='margin-right:5px;' width=80 height=80 class='thumbnail' src='" + picFile.result + "'" +
                        "title=''/><br><span style='cursor: pointer' class='delete' onClick='deletePreview(this, " + id + ")'>âŒì‚­ì œ</span>";
                        output.insertBefore(div,null);
                    }
                }
                //Read the image
                picReader.readAsDataURL(file);
            }
        });

        // ############## ì˜¬ë¦° í›„, 1ê°œì”©ë§Œ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ##############
        filesfake.addEventListener("change", function(event){
            
            var files = event.target.files; //FileList object
            var output = document.getElementById("result_picture");

            // ë°˜ë³µë¬¸ì„ ëŒë¦´ í•„ìš”ëŠ” ì—†ì§€ë§Œ ê·¸ëƒ¥ ë†”ë’€ìŒ
            for (var i = 0; i < files.length; i++){

                var a = new FileListItem(files[i])
                var one_input = document.getElementById("one_input");
                var _input = document.createElement("input");
                _input.type = "file"
                _input.id = "image"+count_imagefile
                _input.multiple = true
                _input.accept = "image/*"
                _input.name = "postimage"
                _input.files = a
                one_input.insertBefore(_input,null);

                save_howmany = count_imagefile + 1 // í•œê°œì”© ì¶”ê°€í•œ ê²ƒë„ ì·¨ì†Œ ë˜ë©´ ì§€ìš¸ ìˆ˜ ìˆë„ë¡

            }

            for(var i = 0; i< files.length; i++)
            {
                var file = files[i];

                //Only pics
                if(!file.type.match("image"))
                    continue;
                    
                var picReader = new FileReader();

                getid(count_imagefile) //functionì„ ë§Œë“¤ì–´ì„œ ì•ˆì— ë„£ìœ¼ë©´ ië¼ëŠ” ê°’ì„ onloadì•ˆì— ë„£ì„ ìˆ˜ ìˆìŒ!!

                function getid(id){ 
                    picReader.onload = function(event){
                        var picFile = event.target;
                        var div = document.createElement("div");
                        div.style.textAlign = "center"
                        div.innerHTML = "<img style='margin-right:5px;' width=80 height=80 class='thumbnail' src='" + picFile.result + "'" +
                        "title=''/><br><span style='cursor: pointer' class='delete' onClick='deletePreview(this, " + id + ")'>âŒì‚­ì œ</span>";
                        output.insertBefore(div,null);
                    }
                }

                //Read the image
                picReader.readAsDataURL(file);
            }
            if (!files.length == 0){
                count_imagefile++;
            }
            // ì¶”ê°€ëœ í›„ì— ìˆ«ì ì˜¬ë¼ê°€ê¸°!
            files_count = document.getElementById("files_count");
            files_count.innerHTML = " íŒŒì¼ " + count_imagefile + "ê°œ ";
        });

        // ##### íŒŒì¼ #####
        //í•œë²ˆë” ì—¬ëŸ¬ê°œì˜ íŒŒì¼ì„ ê°€ì ¸ì˜¬ ê²½ìš° ëª¨ë“  íŒŒì¼ ì •ë³´ë¥¼ ì§€ìš°ê¸° ìœ„í•´ì„œ ì„¤ì •í•œ ë³€ìˆ˜
        var save_before_file = false;
        var save_howmany_file;

        var filesInput2 = document.getElementById("id_files");

        //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ (onclickìœ¼ë¡œ image_addë¥¼ í´ë¦­í•˜ëŠ” ê²ƒê³¼ ë™ì¼)
        //"ì„ íƒëœ íŒŒì¼" ë¬´ìŠ¨ íŒŒì¼ì¸ì§€ ì•Œë ¤ì£¼ëŠ” í…ìŠ¤íŠ¸ë¥¼ ì•ˆë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©
        var filesMore2 = document.getElementById("file_fake");

        //1ê°œì”© ì¶”ê°€í•˜ëŠ” ì§„ì§œ ë²„íŠ¼ ìœ„ì¹˜
        var filesfake2 = document.getElementById("file_add");
        
        // ############## ëª¨ë“  ì´ë¯¸ì§€ ì˜¬ë ¤ì„œ ì´ë¯¸ì§€ ë³´ì´ê²Œ í•˜ê¸° ##############
        filesInput2.addEventListener("change", function(event){
            var files = event.target.files; //FileList object

            //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ ë³´ì´ê¸°
            filesMore2.style.display = "block"
            
            //ëˆˆì†ì„ìš© ê¸€ì”¨ ë³´ì´ê²Œ ë§Œë“¤ê¸°!
            files_count2 = document.getElementById("files_count_file");
            if (files.length == 0){
                files_count2.innerHTML = " ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
                filesMore2.style.display = "none"
            } else {
                files_count2.innerHTML = " íŒŒì¼ " + files.length + "ê°œ ";
            }
            
            //ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•œ ì¥ì†Œ ì„¤ì •
            var output2 = document.getElementById("result_file");
            //íŒŒì¼ ì…ë ¥ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë„£ìœ¼ë©´ ê¸°ì¡´ì— ìˆë˜ ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ë¥¼ ì—†ì• ê¸°! (ì´ˆê¸°í™”)
            output2.innerHTML = ""

            // save_beforeëŠ” í•œë²ˆ ì´ìƒ ì´ë¯¸ì§€ë¥¼ ë„£ì—ˆìœ¼ë©´! ë‹¤ì‹œ íŒŒì¼ ì…ë ¥ì„ í•  ë•Œ, ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ ìˆëŠ” inputì˜ ì •ë³´ë¥¼ ì‚­ì œí•œë‹¤!
            if (save_before_file){
                for(var i = 0; i < save_howmany_file; i++){
                    document.getElementById("file"+i).remove();
                }

                //ì‚­ì œê°€ ë˜ë©´ (ì´ˆê¸°í™” ê°’)
                save_before_file = false

                //1ê°œì”© ì¶”ê°€í•˜ëŠ” ê°€ì§œ ë²„íŠ¼ ìœ„ì¹˜ ì•ˆë³´ì´ê¸°
                filesMore2.style.display = "none"
            }

            //ì—¬ëŸ¬ê°œ ì´ë¯¸ì§€ì˜ ê°œìˆ˜ë¥¼ ì•Œê¸° ìœ„í•´ì„œ
            count_file = files.length

            // ë‹¤ì¤‘ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” input type fileì„ ê°ê° ì‚­ì œ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œ í•˜ë‚˜ì”© ìƒì„± í›„, ì–´ë–¤ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•˜ë‚˜ì”© ì‚­ì œ
            for (var i = 0; i < files.length; i++){

                var _file2 = new FileListItem(files[i])

                var one_input2 = document.getElementById("one_input_file");
                var _input2 = document.createElement("input");
                _input2.type = "file"

                // ë‹¤ì¤‘ìœ¼ë¡œ ë°›ì€ inputì„ ê°ì ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì§€ìš°ê±°ë‚˜ ë‚˜ì¤‘ì— ê´€ë¦¬ í•  ìˆ˜ ìˆë„ë¡ idë¥¼ ë‹¤ë¥´ê²Œ ì¤˜ì„œ ì •ì˜í–ˆë‹¤
                _input2.id = "file"+i
                // FileListë¥¼ ë°›ê¸° ìœ„í•´ì„œ trueë¡œ ì„¤ì •
                _input2.multiple = true

                // nameì„ postimageë¡œ í•œ ì´ìœ ëŠ” Viewsì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì€ postimageë§Œ ì €ì¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´!
                _input2.name = "postfile"
                _input2.files = _file2
                one_input2.insertBefore(_input2,null);

                save_before_file = true
                save_howmany_file = files.length
            }

            for(var i = 0; i< files.length; i++)
            {
                var file = files[i];
                    
                var picReader = new FileReader();

                getid(i, file.name) //functionì„ ë§Œë“¤ì–´ì„œ ì•ˆì— ë„£ìœ¼ë©´ ië¼ëŠ” ê°’ì„ onloadì•ˆì— ë„£ì„ ìˆ˜ ìˆìŒ!!

                function getid(id, x){ 
                    picReader.onload = function(event){
                        var picFile = event.target;
                        var div = document.createElement("div");
                        div.style.display = "flex";
                        div.style.justifyContent = "space-between";
                        div.innerHTML = "<span>"+ x + "</span>" + "<span style='cursor: pointer' class='delete' onClick='deleteFPreview(this, " + id + ")'>âŒì‚­ì œ</span>";
                        output2.insertBefore(div,null);
                    }
                }
                //Read the image
                picReader.readAsDataURL(file);
            }
        });

        // ############## ì˜¬ë¦° í›„, 1ê°œì”©ë§Œ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ##############
        filesfake2.addEventListener("change", function(event){
            
            var files = event.target.files; //FileList object
            var output2 = document.getElementById("result_file");

            // ë°˜ë³µë¬¸ì„ ëŒë¦´ í•„ìš”ëŠ” ì—†ì§€ë§Œ ê·¸ëƒ¥ ë†”ë’€ìŒ
            for (var i = 0; i < files.length; i++){

                var a = new FileListItem(files[i])
                var one_input = document.getElementById("one_input_file");
                var _input = document.createElement("input");
                _input.type = "file"
                _input.id = "file"+count_file
                _input.multiple = true
                _input.accept = "*"
                _input.name = "postfile"
                _input.files = a
                one_input.insertBefore(_input,null);

                save_howmany_file = count_file + 1 // í•œê°œì”© ì¶”ê°€í•œ ê²ƒë„ ì·¨ì†Œ ë˜ë©´ ì§€ìš¸ ìˆ˜ ìˆë„ë¡

            }

            for(var i = 0; i< files.length; i++)
            {
                var file = files[i];
                    
                var picReader = new FileReader();

                getid(count_file, file.name) //functionì„ ë§Œë“¤ì–´ì„œ ì•ˆì— ë„£ìœ¼ë©´ ië¼ëŠ” ê°’ì„ onloadì•ˆì— ë„£ì„ ìˆ˜ ìˆìŒ!!

                function getid(id, x){ 
                    picReader.onload = function(event){
                        var picFile = event.target;
                        var div = document.createElement("div");
                        div.style.display = "flex";
                        div.style.justifyContent = "space-between";
                        div.innerHTML = "<span>"+ x + "</span>" + "<span style='cursor: pointer' class='delete' onClick='deleteFPreview(this, " + id + ")'>âŒì‚­ì œ</span>";
                        output2.insertBefore(div,null);
                    }
                }

                //Read the image
                picReader.readAsDataURL(file);
            }
            if (!files.length == 0){
                count_file++;
            }
            // ì¶”ê°€ëœ í›„ì— ìˆ«ì ì˜¬ë¼ê°€ê¸°!
            files_count2 = document.getElementById("files_count_file");
            files_count2.innerHTML = " íŒŒì¼ " + count_file + "ê°œ ";
        });
    }
    else
    {
        console.log("Your browser does not support File API");
    }

}
</script>
{% endif %}
{% for i in important_board %}
<div style="margin-bottom: 10px;display:table;"><span style="display:table-cell;vertical-align:middle;background-color:{{i.post.category.color}};" class="badge">{{i.post.category.board_name}}</span><a style="display:table-cell;padding-left: 5px;" href="{% url 'forms:shw_form' i.post.category i.post.id %}">{{i.post.title_short}}</a></div>
{% endfor %}
<div style="display:flex;justify-content: space-between;">
    <h2>{{board_name}}</h2>
    <div style="display: flex;">
{% if user.is_anonymous %}
<!-- ë””ìì¸ ë•Œë¬¸ì— ì¢€ ë³µì¡í•©ë‹ˆë‹¤ -->
<form method="GET" style="text-align: right;margin-left:8px;" action="{% url 'forms:selectform' board_name %}">
    <input type="text" calss="form-control" name="search">
    <input type="submit" value="ğŸ”">
</form>
</div>
</div>
{% endif %}

{% if user.is_authenticated %}
<button style="height: fit-content;font-size: x-small;" class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
âœê¸€ì“°ê¸°
</button>
<form method="GET" style="text-align: right;margin-left:8px;" action="{% url 'forms:selectform' board_name %}">
    <input type="text" calss="form-control" name="search">
    <input type="submit" value="ğŸ”">
</form>
</div>
</div>
<div class="collapse" id="collapseExample">
<br>
<form enctype="multipart/form-data" action="{% url 'forms:selectform' board_name %}" method="post">
    {% csrf_token %}
    <table>
    {{ form.as_p }}
    
    <!-- ëˆˆì†ì„ í•„ìš” (ì´ë¯¸ì§€ ì„ íƒ í•˜ê¸°)-->
    <div class="Image_Dont">{{imageform.as_p}}</div>
    <div style="margin-bottom:10px;">ì´ë¯¸ì§€ : <input type="button" value="íŒŒì¼ ì„ íƒ" onclick="document.getElementById('id_image').click();" /><span id='files_count'> ì„ íƒëœ íŒŒì¼ ì—†ìŒ</span></div>
    <span style="display: none;" id="one_input"></span>

    <!-- ëˆˆì†ì„ í•„ìš” (ì„ íƒ í›„ ëª‡ê°œ ì¶”ê°€) -->
    <input style="display: none;" id="image_add" type="file" accept="image/*"/>
    <span style="display: none;" id="image_fake"><input style="margin-bottom: 10px;" type="button" value="íŒŒì¼ ì¶”ê°€" onclick="document.getElementById('image_add').click();" /></span>
    <output style="display: flex;flex-flow:wrap; margin-bottom: 10px;" id="result_picture"></output>
    
    <!-- ëˆˆì†ì„ í•„ìš” (íŒŒì¼ ì„ íƒ í•˜ê¸°)-->
    <div class="File_Dont">{{filesform.as_p}}</div>
    <div style="margin-bottom:10px;">ì²¨ë¶€íŒŒì¼ : <input type="button" value="íŒŒì¼ ì„ íƒ" onclick="document.getElementById('id_files').click();" /><span id='files_count_file'> ì„ íƒëœ íŒŒì¼ ì—†ìŒ</span></div>
    <span style="display: none;" id="one_input_file"></span>

    <!-- ëˆˆì†ì„ í•„ìš” (ì„ íƒ í›„ ëª‡ê°œ ì¶”ê°€) -->
    <input style="display: none;" id="file_add" type="file" accept="image/*"/>
    <span style="display: none;" id="file_fake"><input style="margin-bottom: 10px;" type="button" value="íŒŒì¼ ì¶”ê°€" onclick="document.getElementById('file_add').click();" /></span>
    <output id="result_file"></output>

    </table>
    <div style="text-align: center;">
    <input type="submit" class="btn btn-warning" value="ğŸ“ƒê¸€ì‘ì„±" />
    </div>
</form>
</div>
{% endif %}
<!-- ì¸ê¸°ê¸€ -->
<hr>
{% for i in like_board %}
{% if i.num_item > 0 %}
<div style="margin-bottom:3px;display:table;">
    <span style="display:table-cell;vertical-align:middle;background-color:{{i.category.color}};" class="badge">ì¸ê¸°ê¸€</span>
    <a style="display:table-cell;padding-left: 5px;" href="{% url 'forms:shw_form' i.category i.id %}">{{i.title_short}}</a> 
    <span style="margin-left: 5px;" class="badge badge-light">
        ì¢‹ì•„ìš”ğŸ’– : <span>{{i.num_item}}</span>
    </span>
</div>
{% endif %}
{% endfor %}
<hr>
<!-- ëª¨ë“  ê¸€ -->
{% for form_contents in getForm %}
<p style="display: flex;">
    {% if form_contents.author.Image %}
    <img alt="{{form_contents.author.Name}}" style="border-radius: 5px;margin-right:8px;" width="50" height="50" src={{form_contents.author.Image.url}}>
    {% else %}
    <img alt="{{form_contents.author.Name}}" style="border-radius: 5px;margin-right:8px;" width="50" height="50" src=https://image.flaticon.com/icons/svg/634/634741.svg>
    {% endif %}
    <span>
    <b>{{form_contents.author.Name}}</b><br>
    <em>ì‘ì„± : {{form_contents.created_at|date:"m/d H:i"}}</em>
    </span>
</p>

<p>
</p>

<h3>
{{form_contents.title_short}}
{% if form_contents.image_set.all %}
ğŸ¨
{% endif %}
{% if form_contents.files_set.all %}
ğŸ’¾
{% endif %}
</h3>

<p>
    <span class="badge badge-light">
        ëŒ“ê¸€ : {{form_contents.comment_set.all|length}} 
    </span>
    <span class="badge badge-light">
        ì¢‹ì•„ìš”ğŸ’– : <span>{{form_contents.like_set.all|length}}</span>
    </span>
</p>
<a href="{% url 'forms:shw_form' form_contents.category form_contents.id %}">ìì„¸íˆ ë³´ê¸°</a> 
<hr>
{% endfor %}

{% endblock %}